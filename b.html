<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booking Calendar | CotForge</title>

  <!-- Bootstrap 5.3 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- AOS CSS -->
  <link href="https://cdn.jsdelivr.net/npm/aos@3.0.0-beta.6/dist/aos.css" rel="stylesheet">

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    body { scroll-behavior: smooth; background: #f8f9fa; }
    .calendar-container { overflow-x: auto; }
    #calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
    .calendar-day { border: 1px solid #dee2e6; border-radius: 5px; padding: 10px; background: #fff; min-height: 80px; display: flex; flex-direction: column; }
    .calendar-day.disabled { background: #e9ecef; color: #6c757d; cursor: not-allowed; }
    .calendar-day.selected { border: 2px solid #0d6efd; background: #e7f1ff; }
    .calendar-day h6 { margin: 0 0 5px 0; font-size: 0.9rem; }
    .time-slot { cursor: pointer; padding: 5px; border-radius: 3px; margin-bottom: 3px; background: #f8f9fa; transition: 0.2s; font-size: 0.85rem; text-align: center; }
    .time-slot:hover { background: #e2e6ea; }
    .time-slot.disabled { background: #e9ecef; color: #6c757d; cursor: not-allowed; }
    @media(max-width: 576px) { #calendar { grid-template-columns: repeat(7, 60px); } }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-semibold" href="#">CotForge</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto gap-2">
          <li class="nav-item"><a class="nav-link" href="#">CRUD Demo</a></li>
          <li class="nav-item"><a class="nav-link active" href="#">Calendar Demo</a></li>
          <li class="nav-item"><a class="nav-link" href="#">API Demo</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main style="padding-top:90px;">
    <div class="container py-5" data-aos="fade-up">
      <h1 class="mb-4 text-center"><i class="fas fa-calendar-alt me-2"></i>Booking Scheduler</h1>
      <p class="text-center text-muted mb-4">Select a date and a time slot to book your appointment.</p>

      <!-- Month selector -->
      <div class="d-flex justify-content-center mb-3">
        <select id="yearSelect" class="form-select w-auto me-2"></select>
        <select id="monthSelect" class="form-select w-auto"></select>
      </div>

      <!-- Calendar -->
      <div class="calendar-container mb-4">
        <div id="calendar"></div>
      </div>

      <!-- Selected date & times -->
      <div id="bookingForm" class="card p-3 shadow-sm">
        <h5>Selected Booking</h5>
        <p id="selectedDate">No date selected</p>
        <div id="timeSlots" class="d-flex flex-wrap gap-2"></div>
        <input type="text" id="userName" class="form-control mt-3" placeholder="Enter your name">
        <button id="bookBtn" class="btn btn-primary mt-3 w-100">Book Now</button>
      </div>

      <h4 class="mt-4">Bookings</h4>
      <ul id="bookingList" class="list-group mt-2"></ul>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-dark text-light pt-5 pb-4 mt-5">
    <div class="container text-center small text-secondary">
      &copy; <span id="yearFooter"></span> CotForge. All rights reserved.
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@3.0.0-beta.6/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>

  <script>
    AOS.init({ duration: 800, once: true, easing: 'ease-in-out' });
    document.getElementById('yearFooter').textContent = new Date().getFullYear();

    const calendar = document.getElementById('calendar');
    const selectedDateDisplay = document.getElementById('selectedDate');
    const timeSlotsContainer = document.getElementById('timeSlots');
    const bookingList = document.getElementById('bookingList');
    const bookBtn = document.getElementById('bookBtn');
    const userName = document.getElementById('userName');

    const days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
    const times = [
      { time: '09:00', disabled: false },
      { time: '11:00', disabled: true },
      { time: '13:00', disabled: false },
      { time: '15:00', disabled: false },
      { time: '17:00', disabled: true }
    ];
    let selectedDate = null;
    let selectedTime = null;

    // Populate year/month selects
    const yearSelect = document.getElementById('yearSelect');
    const monthSelect = document.getElementById('monthSelect');
    const currentYear = new Date().getFullYear();
    for(let y=currentYear; y<=currentYear+2; y++) { let opt=document.createElement('option'); opt.value=y; opt.textContent=y; yearSelect.appendChild(opt); }
    for(let m=0; m<12; m++){ let opt=document.createElement('option'); opt.value=m; opt.textContent=new Date(0,m).toLocaleString('default',{month:'long'}); monthSelect.appendChild(opt); }
    yearSelect.value = currentYear; monthSelect.value = new Date().getMonth();

    function renderCalendar(){
      calendar.innerHTML = '';
      const year = parseInt(yearSelect.value);
      const month = parseInt(monthSelect.value);
      const firstDay = new Date(year, month, 1).getDay(); // Sunday=0
      const daysInMonth = new Date(year, month+1,0).getDate();
      const disabledDates = [3, 7, 15]; // example: grayed out days

      // Adjust firstDay so Monday=0
      const startOffset = (firstDay + 6) %7;

      for(let i=0;i<startOffset;i++){
        const empty = document.createElement('div');
        calendar.appendChild(empty);
      }

      for(let d=1; d<=daysInMonth; d++){
        const div = document.createElement('div');
        div.className = 'calendar-day';
        if(disabledDates.includes(d)) div.classList.add('disabled');
        div.innerHTML = `<h6>${d}</h6>`;
        div.onclick = ()=>{
          if(div.classList.contains('disabled')) return;
          calendar.querySelectorAll('.calendar-day').forEach(cd=>cd.classList.remove('selected'));
          div.classList.add('selected');
          selectedDate = `${year}-${month+1}-${d}`;
          selectedDateDisplay.textContent = selectedDate;
          renderTimeSlots();
        };
        calendar.appendChild(div);
      }
    }

    function renderTimeSlots(){
      timeSlotsContainer.innerHTML = '';
      times.forEach(t=>{
        const btn = document.createElement('div');
        btn.className = 'time-slot';
        if(t.disabled) btn.classList.add('disabled');
        btn.textContent = t.time;
        btn.onclick = ()=>{
          if(t.disabled) return;
          selectedTime = t.time;
          timeSlotsContainer.querySelectorAll('.time-slot').forEach(ts=>ts.classList.remove('selected'));
          btn.classList.add('selected');
        };
        timeSlotsContainer.appendChild(btn);
      });
    }

    bookBtn.onclick = ()=>{
      if(!selectedDate || !selectedTime || !userName.value) return alert('Select date, time and name!');
      const li = document.createElement('li');
      li.className = 'list-group-item d-flex justify-content-between align-items-center';
      li.innerHTML = `<span><i class="fas fa-user me-2"></i>${userName.value}</span><span><i class="fas fa-calendar-day me-1"></i>${selectedDate} <i class="fas fa-clock ms-2 me-1"></i>${selectedTime}</span>`;
      bookingList.appendChild(li);
      selectedDate = null; selectedTime=null; userName.value=''; selectedDateDisplay.textContent='No date selected';
      calendar.querySelectorAll('.calendar-day').forEach(cd=>cd.classList.remove('selected'));
      timeSlotsContainer.innerHTML='';
    }

    yearSelect.onchange = monthSelect.onchange = renderCalendar;

    renderCalendar();
  </script>
</body>
</html>
